import{a as k1}from"./chunk-FWEBCYCS.js";import{b as j}from"./chunk-GALNKKY2.js";import{a as z1}from"./chunk-C2BG3B45.js";import{$ as g,Ba as J,Bb as h1,C as G,Ca as o1,Db as p1,Ga as s1,Ha as a1,Ib as d1,J as Z,Jb as x1,Lb as m1,M as p,Ma as t1,Mb as u1,Nb as M1,Oa as i1,Pa as n1,Pb as S,Q as K,R as X,Ra as l1,S as D,Sa as M,Ta as e1,U as $,Ua as c1,V as Q,Va as r1,Wa as v1,Z as F,_ as c,a as V,aa as r,b as C,e as R,f as v,h,i as f,ja as A,l as u,la as Y,o as I,p as B,q as P,r as x,s as N,u as b,v as _,w as q,wb as g1,x as e,xb as y,y as W,yb as w1}from"./chunk-Y6L6FY7Q.js";import"./chunk-UOIN7AL5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-3RQY4ML3.js";import"./chunk-2VMTP56Z.js";import"./chunk-62PR5BGO.js";import"./chunk-Y2PDZ72K.js";import"./chunk-QNQ7HPGK.js";import"./chunk-URWANECN.js";import"./chunk-P55UMIV5.js";import"./chunk-7FY2OE2O.js";import"./chunk-SX5ZWHL7.js";import"./chunk-K5TYQZIT.js";import"./chunk-XUIXCEXB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-4BRMN3ZK.js";import"./chunk-CKP3SGE2.js";import"./chunk-GMU3SYHH.js";import"./chunk-GOEAN3WI.js";import"./chunk-SNC2IU6J.js";import"./chunk-5SDHGKAM.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as m}from"./chunk-JHI3MBHO.js";var f1=()=>{let s=e(j),o=e(M);return R(s.isAuthenticated()).pipe(P(()=>console.log("Start auth...")),v(t=>!0))};var B1=(()=>{let o=class o{constructor(){this.router=e(M)}ngOnInit(){}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["insta-footer"]],decls:8,vars:0,consts:[["slot","bottom"],[3,"click"],["src","assets/svgs/home.svg",1,"text-[var(--ion-color-primary)]","cursor-pointer"],["name","search",1,"text-[var(--ion-color-primary)]","cursor-pointer"],["name","person-circle-outline",1,"text-[var(--ion-color-primary)]","cursor-pointer"]],template:function(a,n){a&1&&(c(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),A("click",function(){return n.router.navigateByUrl("/")}),r(3,"ion-icon",2),g(),c(4,"ion-tab-button",1),A("click",function(){return n.router.navigateByUrl("/search")}),r(5,"ion-icon",3),g(),c(6,"ion-tab-button",1),A("click",function(){return n.router.navigateByUrl("/profile")}),r(7,"ion-icon",4),g()()())},dependencies:[u1,d1,x1,S],encapsulation:2,changeDetection:0});let s=o;return s})();var L1=(()=>{let o=class o{constructor(){this.userName=s1.required()}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["insta-header"]],inputs:{userName:[1,"userName"]},decls:5,vars:0,consts:[[1,"flex","justify-between","items-center","w-full","p-4"],["src","assets/svgs/logo.svg","width","120"],[1,"flex","flex-end","items-center","gap-x-2"],["size","large","src","assets/svgs/heart.svg",1,"text-[var(--ion-color-secondary)]","cursor-pointer"],["size","large","src","assets/svgs/msg.svg",1,"text-[var(--ion-color-secondary)]","cursor-pointer"]],template:function(a,n){a&1&&(c(0,"section",0),r(1,"img",1),c(2,"section",2),r(3,"ion-icon",3)(4,"ion-icon",4),g()())},dependencies:[S],styles:["[_nghost-%COMP%]{width:100%}"],changeDetection:0});let s=o;return s})();function F1(s,o){if(s&1&&(c(0,"ion-header",0)(1,"ion-toolbar"),r(2,"insta-header",1),g()()),s&2){let t,i=Y();F("translucent",!0),Z(2),F("userName",((t=i.currentUser())==null?null:t.username)||"")}}function E1(s){let o=m({},s.data||{}),t=s.firstChild;for(;t;)o=m(m({},o),t.data||{}),t=t.firstChild;return o}var H1=(()=>{let o=class o{constructor(){this.authStore=e(j),this.router=e(M),this.routeData$=this.router.events.pipe(f(i=>i instanceof n1),I(null),v(()=>E1(this.router.routerState.snapshot.root))),this.routeData=k1(this.routeData$,{initialValue:{}}),this.hideHeader=o1(()=>!!this.routeData().hideHeader),this.currentUser=this.authStore.currentUser}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["insta-layout"]],decls:4,vars:1,consts:[[3,"translucent"],[3,"userName"]],template:function(a,n){a&1&&($(0,F1,3,2,"ion-header",0),c(1,"ion-content"),r(2,"ion-router-outlet")(3,"insta-footer"),g()),a&2&&Q(n.hideHeader()?-1:0)},dependencies:[B1,L1,y,h1,p1,m1],encapsulation:2,changeDetection:0});let s=o;return s})();var V1=[{path:"",canMatch:[f1],component:H1,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-4DBHYUCQ.js").then(s=>s.HomePage)},{path:"profile",loadChildren:()=>import("./chunk-2MDEYYZT.js").then(s=>s.profileRoutes)},{path:"search",data:{hideHeader:!0},loadChildren:()=>import("./chunk-XRDMM54J.js").then(s=>s.exploreRoutes)}]},{path:"auth",pathMatch:"full",loadChildren:()=>import("./chunk-K5ZBCPTS.js").then(s=>s.authRoutes)}];var C1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M368 368L144 144M368 144L144 368' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var A1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M258.9 48C141.92 46.42 46.42 141.92 48 258.9c1.56 112.19 92.91 203.54 205.1 205.1 117 1.6 212.48-93.9 210.88-210.88C462.44 140.91 371.09 49.56 258.9 48zm126.42 327.25a4 4 0 01-6.14-.32 124.27 124.27 0 00-32.35-29.59C321.37 329 289.11 320 256 320s-65.37 9-90.83 25.34a124.24 124.24 0 00-32.35 29.58 4 4 0 01-6.14.32A175.32 175.32 0 0180 259c-1.63-97.31 78.22-178.76 175.57-179S432 158.81 432 256a175.32 175.32 0 01-46.68 119.25z'/><path d='M256 144c-19.72 0-37.55 7.39-50.22 20.82s-19 32-17.57 51.93C191.11 256 221.52 288 256 288s64.83-32 67.79-71.24c1.48-19.74-4.8-38.14-17.68-51.82C293.39 151.44 275.59 144 256 144z'/></svg>";var y1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>";var E,T1=function(){if(typeof window>"u")return new Map;if(!E){var s=window;s.Ionicons=s.Ionicons||{},E=s.Ionicons.map=s.Ionicons.map||new Map}return E},T=function(s){Object.keys(s).forEach(function(o){S1(o,s[o]);var t=o.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();o!==t&&S1(t,s[o])})},S1=function(s,o){var t=T1(),i=t.get(s);i===void 0?t.set(s,o):i!==o&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(s,'". Ensure that multiple icons are not mapped to the same icon name.'))};var j1=(()=>{let o=class o{constructor(){T({search:y1,personCircleOutline:A1,closeOutline:C1})}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["app-root"]],decls:2,vars:0,template:function(a,n){a&1&&(c(0,"ion-app"),r(1,"ion-router-outlet"),g())},dependencies:[w1,y],encapsulation:2,changeDetection:0});let s=o;return s})();var O1={production:!0,apiUrl:"http://localhost:3000/api"};var U="Service workers are disabled or not supported by this browser",z=class{serviceWorker;worker;registration;events;constructor(o,t){if(this.serviceWorker=o,!o)this.worker=this.events=this.registration=new V(i=>i.error(new x(5601,!1)));else{let i=null,a=new C;this.worker=new V(w=>(i!==null&&w.next(i),a.subscribe(H=>w.next(H))));let n=()=>{let{controller:w}=o;w!==null&&(i=w,a.next(i))};o.addEventListener("controllerchange",n),n(),this.registration=this.worker.pipe(B(()=>o.getRegistration().then(w=>{if(!w)throw new x(5601,!1);return w})));let l=new C;this.events=l.asObservable();let d=w=>{let{data:H}=w;H?.type&&l.next(H)};o.addEventListener("message",d),t?.get(D,null,{optional:!0})?.onDestroy(()=>{o.removeEventListener("controllerchange",n),o.removeEventListener("message",d)})}}postMessage(o,t){return new Promise(i=>{this.worker.pipe(u(1)).subscribe(a=>{a.postMessage(m({action:o},t)),i()})})}postMessageWithOperation(o,t,i){let a=this.waitForOperationCompleted(i),n=this.postMessage(o,t);return Promise.all([n,a]).then(([,l])=>l)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(o){let t;return typeof o=="string"?t=i=>i.type===o:t=i=>o.includes(i.type),this.events.pipe(f(t))}nextEventOfType(o){return this.eventsOfType(o).pipe(u(1))}waitForOperationCompleted(o){return new Promise((t,i)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(f(a=>a.nonce===o),u(1),v(a=>{if(a.result!==void 0)return a.result;throw new Error(a.error)})).subscribe({next:t,error:i})})}get isEnabled(){return!!this.serviceWorker}},U1=(()=>{class s{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new C;constructor(t){if(this.sw=t,!t.isEnabled){this.messages=h,this.notificationClicks=h,this.notificationCloses=h,this.pushSubscriptionChanges=h,this.subscription=h;return}this.messages=this.sw.eventsOfType("PUSH").pipe(v(a=>a.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(v(a=>a.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(v(a=>a.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(v(a=>a.data)),this.pushManager=this.sw.registration.pipe(v(a=>a.pushManager));let i=this.pushManager.pipe(B(a=>a.getSubscription()));this.subscription=new V(a=>{let n=i.subscribe(a),l=this.subscriptionChanges.subscribe(a);return()=>{n.unsubscribe(),l.unsubscribe()}})}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(U));let i={userVisibleOnly:!0},a=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),n=new Uint8Array(new ArrayBuffer(a.length));for(let l=0;l<a.length;l++)n[l]=a.charCodeAt(l);return i.applicationServerKey=n,new Promise((l,d)=>{this.pushManager.pipe(B(k=>k.subscribe(i)),u(1)).subscribe({next:k=>{this.subscriptionChanges.next(k),l(k)},error:d})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(U));let t=i=>{if(i===null)throw new x(5602,!1);return i.unsubscribe().then(a=>{if(!a)throw new x(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((i,a)=>{this.subscription.pipe(u(1),B(t)).subscribe({next:i,error:a})})}decodeBase64(t){return atob(t)}static \u0275fac=function(i){return new(i||s)(q(z))};static \u0275prov=b({token:s,factory:s.\u0275fac})}return s})(),R1=(()=>{class s{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=h,this.unrecoverable=h;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(U));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let t=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new x(5601,!1));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static \u0275fac=function(i){return new(i||s)(q(z))};static \u0275prov=b({token:s,factory:s.\u0275fac})}return s})();var q1=new _("");function I1(){let s=e(L);if(!("serviceWorker"in navigator&&s.enabled!==!1))return;let o=e(q1),t=e(K),i=e(D);t.runOutsideAngular(()=>{let a=navigator.serviceWorker,n=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",n),i.onDestroy(()=>{a.removeEventListener("controllerchange",n)})}),t.runOutsideAngular(()=>{let a,{registrationStrategy:n}=s;if(typeof n=="function")a=new Promise(l=>n().subscribe(()=>l()));else{let[l,...d]=(n||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":a=Promise.resolve();break;case"registerWithDelay":a=b1(+d[0]||0);break;case"registerWhenStable":a=Promise.race([i.whenStable(),b1(+d[0])]);break;default:throw new x(5600,!1)}}a.then(()=>{i.destroyed||navigator.serviceWorker.register(o,{scope:s.scope,updateViaCache:s.updateViaCache,type:s.type}).catch(l=>console.error(N(5604,!1)))})})}function b1(s){return new Promise(o=>setTimeout(o,s))}function P1(s,o){return new z(s.enabled!==!1?navigator.serviceWorker:void 0,o)}var L=class{enabled;updateViaCache;type;scope;registrationStrategy};function D1(s,o={}){return W([U1,R1,{provide:q1,useValue:s},{provide:L,useValue:o},{provide:z,useFactory:P1,deps:[L,G]},X(I1)])}t1(j1,{providers:[{provide:l1,useClass:g1},M1({mode:"ios",rippleEffect:!0}),i1(),c1(V1,r1(e1),v1()),z1(O1),J(),D1("ngsw-worker.js",{enabled:!a1(),registrationStrategy:"registerWhenStable:30000"})]});
