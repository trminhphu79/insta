import{a as S1}from"./chunk-OPOETWT7.js";import{b as I}from"./chunk-WWZI7M4W.js";import{a as y1}from"./chunk-65JDVV36.js";import{$ as r,A as $,B as Q,Ba as e1,Bb as f1,C as Y,Ca as c1,Cb as B1,E as J,Eb as L1,Ga as r1,Ha as v1,J as b,Jb as H1,Kb as V1,M as p,Ma as g1,Mb as E,Nb as C1,Oa as w1,Ob as A1,P as o1,Pa as h1,Q as s1,Qb as F,R as a1,Ra as p1,S as U,Sa as z,Ta as d1,U as t1,Ua as x1,V as i1,Va as m1,Wa as u1,Z as V,_ as c,a as j,aa as v,b as O,e as N,f as g,h,ha as n1,i as B,ja as M,l as u,la as q,o as W,p as L,q as G,r as x,s as Z,u as H,v as K,va as l1,w as T,wb as M1,x as e,xb as D,y as X,yb as z1,zb as k1}from"./chunk-5G3JQQIL.js";import"./chunk-UOIN7AL5.js";import"./chunk-QUJFQN2Y.js";import"./chunk-3RQY4ML3.js";import"./chunk-2VMTP56Z.js";import"./chunk-62PR5BGO.js";import"./chunk-Y2PDZ72K.js";import"./chunk-QNQ7HPGK.js";import"./chunk-URWANECN.js";import"./chunk-P55UMIV5.js";import"./chunk-7FY2OE2O.js";import"./chunk-SX5ZWHL7.js";import"./chunk-K5TYQZIT.js";import"./chunk-XUIXCEXB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-4BRMN3ZK.js";import"./chunk-CKP3SGE2.js";import"./chunk-GMU3SYHH.js";import"./chunk-GOEAN3WI.js";import"./chunk-SNC2IU6J.js";import"./chunk-5SDHGKAM.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-REYR55MP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as m,e as S}from"./chunk-JHI3MBHO.js";var j1=()=>{let s=e(I),o=e(z);return N(s.isAuthenticated()).pipe(G(()=>console.log("Start auth...")),g(i=>!0))};var O1=(()=>{let o=class o{constructor(){this.router=e(z)}ngOnInit(){}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["insta-footer"]],decls:8,vars:0,consts:[["slot","bottom"],[3,"click"],["src","assets/svgs/home.svg",1,"text-[var(--ion-color-primary)]","cursor-pointer"],["name","search",1,"text-[var(--ion-color-primary)]","cursor-pointer"],["name","person-circle-outline",1,"text-[var(--ion-color-primary)]","cursor-pointer"]],template:function(a,n){a&1&&(c(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),M("click",function(){return n.router.navigateByUrl("/")}),v(3,"ion-icon",2),r(),c(4,"ion-tab-button",1),M("click",function(){return n.router.navigateByUrl("/search")}),v(5,"ion-icon",3),r(),c(6,"ion-tab-button",1),M("click",function(){return n.router.navigateByUrl("/profile")}),v(7,"ion-icon",4),r()()())},dependencies:[C1,H1,V1,F],encapsulation:2,changeDetection:0});let s=o;return s})();var b1=(()=>{let o=class o{constructor(){this.userName=r1.required()}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["insta-header"]],inputs:{userName:[1,"userName"]},decls:5,vars:0,consts:[[1,"flex","justify-between","items-center","w-full","p-4"],["src","assets/svgs/logo.svg","width","120"],[1,"flex","flex-end","items-center","gap-x-2"],["size","large","src","assets/svgs/heart.svg",1,"text-[var(--ion-color-secondary)]","cursor-pointer"],["size","large","src","assets/svgs/msg.svg",1,"text-[var(--ion-color-secondary)]","cursor-pointer"]],template:function(a,n){a&1&&(c(0,"section",0),v(1,"img",1),c(2,"section",2),v(3,"ion-icon",3)(4,"ion-icon",4),r()())},dependencies:[F],styles:["[_nghost-%COMP%]{width:100%}"],changeDetection:0});let s=o;return s})();function G1(s,o){if(s&1&&(c(0,"ion-header",0)(1,"ion-toolbar"),v(2,"insta-header",1),r()()),s&2){let i,t=q();V("translucent",!0),b(2),V("userName",((i=t.currentUser())==null?null:i.username)||"")}}function Z1(s){let o=m({},s.data||{}),i=s.firstChild;for(;i;)o=m(m({},o),i.data||{}),i=i.firstChild;return o}var q1=(()=>{let o=class o{constructor(){this.authStore=e(I),this.router=e(z),this.routeData$=this.router.events.pipe(B(t=>t instanceof h1),W(null),g(()=>Z1(this.router.routerState.snapshot.root))),this.routeData=S1(this.routeData$,{initialValue:{}}),this.hideHeader=c1(()=>!!this.routeData().hideHeader),this.currentUser=this.authStore.currentUser}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["insta-layout"]],decls:4,vars:1,consts:[[3,"translucent"],[3,"userName"]],template:function(a,n){a&1&&(t1(0,G1,3,2,"ion-header",0),c(1,"ion-content"),v(2,"ion-router-outlet")(3,"insta-footer"),r()),a&2&&i1(n.hideHeader()?-1:0)},dependencies:[O1,b1,D,f1,L1,E],encapsulation:2,changeDetection:0});let s=o;return s})();var D1=[{path:"",canMatch:[j1],component:q1,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",loadComponent:()=>import("./chunk-P2PYZXEA.js").then(s=>s.HomePage)},{path:"profile",loadChildren:()=>import("./chunk-43MIADZQ.js").then(s=>s.profileRoutes)},{path:"search",data:{hideHeader:!0},loadChildren:()=>import("./chunk-Z47NHGZG.js").then(s=>s.exploreRoutes)}]},{path:"auth",pathMatch:"full",loadChildren:()=>import("./chunk-KB5Z3344.js").then(s=>s.authRoutes)}];var E1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M368 368L144 144M368 144L144 368' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var F1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M258.9 48C141.92 46.42 46.42 141.92 48 258.9c1.56 112.19 92.91 203.54 205.1 205.1 117 1.6 212.48-93.9 210.88-210.88C462.44 140.91 371.09 49.56 258.9 48zm126.42 327.25a4 4 0 01-6.14-.32 124.27 124.27 0 00-32.35-29.59C321.37 329 289.11 320 256 320s-65.37 9-90.83 25.34a124.24 124.24 0 00-32.35 29.58 4 4 0 01-6.14.32A175.32 175.32 0 0180 259c-1.63-97.31 78.22-178.76 175.57-179S432 158.81 432 256a175.32 175.32 0 01-46.68 119.25z'/><path d='M256 144c-19.72 0-37.55 7.39-50.22 20.82s-19 32-17.57 51.93C191.11 256 221.52 288 256 288s64.83-32 67.79-71.24c1.48-19.74-4.8-38.14-17.68-51.82C293.39 151.44 275.59 144 256 144z'/></svg>";var I1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>";var R,K1=function(){if(typeof window>"u")return new Map;if(!R){var s=window;s.Ionicons=s.Ionicons||{},R=s.Ionicons.map=s.Ionicons.map||new Map}return R},P=function(s){Object.keys(s).forEach(function(o){T1(o,s[o]);var i=o.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();o!==i&&T1(i,s[o])})},T1=function(s,o){var i=K1(),t=i.get(s);t===void 0?i.set(s,o):t!==o&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(s,'". Ensure that multiple icons are not mapped to the same icon name.'))};var U1=(()=>{let o=class o{constructor(){this.deferredPrompt=null,this.canInstall=J(!1),window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),this.deferredPrompt=t,this.canInstall.set(!0)}),window.addEventListener("appinstalled",()=>{this.deferredPrompt=null,this.canInstall.set(!1)})}promptInstall(){return S(this,null,function*(){if(!this.deferredPrompt)return!1;this.deferredPrompt.prompt();let{outcome:t}=yield this.deferredPrompt.userChoice;return this.deferredPrompt=null,this.canInstall.set(!1),t==="accepted"})}isIOSStandalone(){return window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches}};o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=H({token:o,factory:o.\u0275fac,providedIn:"root"});let s=o;return s})();function X1(s,o){if(s&1){let i=n1();c(0,"ion-footer")(1,"ion-toolbar")(2,"ion-button",1),M("click",function(){$(i);let a=q();return Q(a.onInstall())}),l1(3," Install App "),r()()()}}var R1=(()=>{let o=class o{constructor(){this.install=e(U1),P({search:I1,personCircleOutline:F1,closeOutline:E1})}onInstall(){return S(this,null,function*(){let t=yield this.install.promptInstall();console.log("User install outcome:",t)})}};o.\u0275fac=function(a){return new(a||o)},o.\u0275cmp=p({type:o,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"],["expand","block",3,"click"]],template:function(a,n){a&1&&(c(0,"ion-app"),v(1,"ion-router-outlet"),o1(2,X1,4,0,"ion-footer",0),r()),a&2&&(b(2),V("ngIf",n.install.canInstall()))},dependencies:[z1,B1,E,k1,D],encapsulation:2,changeDetection:0});let s=o;return s})();var P1={production:!0,apiUrl:"http://localhost:3000/api"};var _="Service workers are disabled or not supported by this browser",k=class{serviceWorker;worker;registration;events;constructor(o,i){if(this.serviceWorker=o,!o)this.worker=this.events=this.registration=new j(t=>t.error(new x(5601,!1)));else{let t=null,a=new O;this.worker=new j(w=>(t!==null&&w.next(t),a.subscribe(y=>w.next(y))));let n=()=>{let{controller:w}=o;w!==null&&(t=w,a.next(t))};o.addEventListener("controllerchange",n),n(),this.registration=this.worker.pipe(L(()=>o.getRegistration().then(w=>{if(!w)throw new x(5601,!1);return w})));let l=new O;this.events=l.asObservable();let d=w=>{let{data:y}=w;y?.type&&l.next(y)};o.addEventListener("message",d),i?.get(U,null,{optional:!0})?.onDestroy(()=>{o.removeEventListener("controllerchange",n),o.removeEventListener("message",d)})}}postMessage(o,i){return new Promise(t=>{this.worker.pipe(u(1)).subscribe(a=>{a.postMessage(m({action:o},i)),t()})})}postMessageWithOperation(o,i,t){let a=this.waitForOperationCompleted(t),n=this.postMessage(o,i);return Promise.all([n,a]).then(([,l])=>l)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(o){let i;return typeof o=="string"?i=t=>t.type===o:i=t=>o.includes(t.type),this.events.pipe(B(i))}nextEventOfType(o){return this.eventsOfType(o).pipe(u(1))}waitForOperationCompleted(o){return new Promise((i,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(B(a=>a.nonce===o),u(1),g(a=>{if(a.result!==void 0)return a.result;throw new Error(a.error)})).subscribe({next:i,error:t})})}get isEnabled(){return!!this.serviceWorker}},$1=(()=>{class s{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new O;constructor(i){if(this.sw=i,!i.isEnabled){this.messages=h,this.notificationClicks=h,this.notificationCloses=h,this.pushSubscriptionChanges=h,this.subscription=h;return}this.messages=this.sw.eventsOfType("PUSH").pipe(g(a=>a.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(g(a=>a.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(g(a=>a.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(g(a=>a.data)),this.pushManager=this.sw.registration.pipe(g(a=>a.pushManager));let t=this.pushManager.pipe(L(a=>a.getSubscription()));this.subscription=new j(a=>{let n=t.subscribe(a),l=this.subscriptionChanges.subscribe(a);return()=>{n.unsubscribe(),l.unsubscribe()}})}requestSubscription(i){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(_));let t={userVisibleOnly:!0},a=this.decodeBase64(i.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),n=new Uint8Array(new ArrayBuffer(a.length));for(let l=0;l<a.length;l++)n[l]=a.charCodeAt(l);return t.applicationServerKey=n,new Promise((l,d)=>{this.pushManager.pipe(L(f=>f.subscribe(t)),u(1)).subscribe({next:f=>{this.subscriptionChanges.next(f),l(f)},error:d})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));let i=t=>{if(t===null)throw new x(5602,!1);return t.unsubscribe().then(a=>{if(!a)throw new x(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,a)=>{this.subscription.pipe(u(1),L(i)).subscribe({next:t,error:a})})}decodeBase64(i){return atob(i)}static \u0275fac=function(t){return new(t||s)(T(k))};static \u0275prov=H({token:s,factory:s.\u0275fac})}return s})(),Q1=(()=>{class s{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(i){if(this.sw=i,!i.isEnabled){this.versionUpdates=h,this.unrecoverable=h;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED","VERSION_FAILED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(_));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let i=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:i},i).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new x(5601,!1));let i=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:i},i)}static \u0275fac=function(t){return new(t||s)(T(k))};static \u0275prov=H({token:s,factory:s.\u0275fac})}return s})();var N1=new K("");function Y1(){let s=e(A);if(!("serviceWorker"in navigator&&s.enabled!==!1))return;let o=e(N1),i=e(s1),t=e(U);i.runOutsideAngular(()=>{let a=navigator.serviceWorker,n=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",n),t.onDestroy(()=>{a.removeEventListener("controllerchange",n)})}),i.runOutsideAngular(()=>{let a,{registrationStrategy:n}=s;if(typeof n=="function")a=new Promise(l=>n().subscribe(()=>l()));else{let[l,...d]=(n||"registerWhenStable:30000").split(":");switch(l){case"registerImmediately":a=Promise.resolve();break;case"registerWithDelay":a=_1(+d[0]||0);break;case"registerWhenStable":a=Promise.race([t.whenStable(),_1(+d[0])]);break;default:throw new x(5600,!1)}}a.then(()=>{t.destroyed||navigator.serviceWorker.register(o,{scope:s.scope,updateViaCache:s.updateViaCache,type:s.type}).catch(l=>console.error(Z(5604,!1)))})})}function _1(s){return new Promise(o=>setTimeout(o,s))}function J1(s,o){return new k(s.enabled!==!1?navigator.serviceWorker:void 0,o)}var A=class{enabled;updateViaCache;type;scope;registrationStrategy};function W1(s,o={}){return X([$1,Q1,{provide:N1,useValue:s},{provide:A,useValue:o},{provide:k,useFactory:J1,deps:[A,Y]},a1(Y1)])}g1(R1,{providers:[{provide:p1,useClass:M1},A1({mode:"ios",rippleEffect:!0}),w1(),x1(D1,m1(d1),u1()),y1(P1),e1(),W1("ngsw-worker.js",{enabled:!v1(),registrationStrategy:"registerWhenStable:30000"})]});
